
<!-- Ken wang, Oct, 2020 -->

{% extends 'allocation_base.html' %}

{% block content %}
<div class="card container">
    <ul class="nav nav-tabs">
        <li style="font-size: large"><a href="{{ url_for('allocation_run')}}"><strong>Allocation</strong></a></li>
        <li class="active" style="font-size: large"><a href="{{ url_for('allocation_download')}}"><strong>Download</strong></a></li>
        <li style="font-size: large"><a href="{{ url_for('allocation_about')}}" style="font-size: large"><strong>About</strong></a></li>
    </ul>
</div>

<div class="container">
    <form method="post" enctype="multipart/form-data">
    {{ form.csrf_token }}
         <!-- below for flashed messages -->
        <table style="border-collapse:collapse" border="0" cellspacing="0px" align="center">
            <tbody>
                <tr>
                  <td width="1200" align="left">
                      <main class="container">
                        {% if get_flashed_messages()|length>0 %}
                          {% for message in get_flashed_messages(with_categories=True) %}
                            <div class="alert alert-{{ message[0] }}" role="alert">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                {{ message[1] }}
                            </div>
                          {% endfor %}
                        {% endif %}
                      </main>
                  </td>
                </tr>
            </tbody>
        </table>

           <br>
            {{ form.pcba_site.label }} <br>
            {{ form.pcba_site (class='form-control') }}
            {{ form.submit_download_supply (class='btn btn-default') }}

           <br><br><br><br>
            {{ form.fname_output.label }}
            {{ form.fname_output (class='form-control')}}
            {{ form.submit_download_output (class='btn btn-default')}}
            <br><br>
                {% if files_output|length>0 %}
                    <table border="1" cellspacing="1px" align="left" style="border-color: #c5c5c5;">
                        <tbody>
                            <tr>
                                <td width="400"><span style="font-size: large;">Allocation files</span></td>
                                <td width="200"><span style="font-size: large">Creation time</span></td>
                                <td width="200"><span style="font-size: large">File size</span></td>
                            </tr>
                            {% for row in files_output %}
                                <tr>
                                    {% for col in row %}
                                        <td><span style="font-size: small">{{col}}</span></td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

            <!-- why br below does not work here??? -->
            <br>
            <span style="color: #f8f9fa"> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
            <br><br><br><br>
            {{ form.fname_uploaded.label }}
            {{ form.fname_uploaded (class='form-control')}}
            {{ form.submit_download_uploaded (class='btn btn-default')}}
            <br><br>
                    {% if files_uploaded|length>0 %}
                        <table style="border-collapse:collapse" border="1" cellspacing="0px" align="left">
                            <tbody>
                                <tr>
                                    <td width="400"><span style="font-size: large">Uploaded files</span></td>
                                    <td width="200"><span style="font-size: large">Creation time</span></td>
                                    <td width="200"><span style="font-size: large">File size</span></td>
                                </tr>
                                {% for row in files_uploaded %}
                                    <tr>
                                        {% for col in row %}
                                            <td><span style="font-size: small">{{col}}</span></td>
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% endif %}

    </form>
</div>

{% endblock %}

{% block flash_message %}
{% endblock %}